<Application x:Class="WpfAudioConverter.App"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:local="clr-namespace:WpfAudioConverter">
    <Application.Resources>
        <ResourceDictionary>

            <!-- COLOR PALETTE -->
            <SolidColorBrush x:Key="PrimaryBackgroundBrush" Color="#0F172A" />
            <SolidColorBrush x:Key="SecondaryBackgroundBrush" Color="#1E293B" />
            <SolidColorBrush x:Key="ContentPanelBrush" Color="#334155" />
            <SolidColorBrush x:Key="PrimaryAccentBrush" Color="#FF577692" />
            <SolidColorBrush x:Key="SecondaryAccentBrush" Color="#FF2C4577" />
            <SolidColorBrush x:Key="TextPrimaryBrush" Color="#E2E8F0" />
            <SolidColorBrush x:Key="TextSecondaryBrush" Color="#94A3B8" />
            <SolidColorBrush x:Key="BorderBrush" Color="#475569" />
            <SolidColorBrush x:Key="ButtonHoverBrush" Color="#FFFFFF" Opacity="0.1" />
            <SolidColorBrush x:Key="ButtonPressedBrush" Color="#000000" Opacity="0.1" />
            <LinearGradientBrush x:Key="SidebarGradientBrush" StartPoint="0,0" EndPoint="0,1">
                <GradientStop Color="#1E293B" Offset="0.0" />
                <GradientStop Color="#0F172A" Offset="1.0" />
            </LinearGradientBrush>

            <!-- BASE STYLES -->
            <Style TargetType="TextBlock">
                <Setter Property="Foreground" Value="{StaticResource TextPrimaryBrush}" />
            </Style>
            <Style TargetType="Label">
                <Setter Property="Foreground" Value="{StaticResource TextSecondaryBrush}"/>
                <Setter Property="FontStyle" Value="Italic"/>
            </Style>
            <Style TargetType="Separator">
                <Setter Property="Background" Value="{StaticResource BorderBrush}"/>
                <Setter Property="Margin" Value="10,15"/>
            </Style>

            <Style TargetType="CheckBox" x:Key="ModernCheckBox">
                <Setter Property="Foreground" Value="{StaticResource TextPrimaryBrush}"/>
                <Setter Property="VerticalContentAlignment" Value="Center"/>
                <Setter Property="Cursor" Value="Hand"/>
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="CheckBox">
                            <StackPanel Orientation="Horizontal">
                                <Grid Width="20" Height="20">
                                    <Border x:Name="border" Background="Transparent" BorderBrush="{StaticResource BorderBrush}" BorderThickness="2" CornerRadius="3"/>
                                    <TextBlock x:Name="checkmark" Text="&#xE73E;" FontFamily="Segoe MDL2 Assets" Foreground="{StaticResource PrimaryAccentBrush}"
                                           FontSize="12" HorizontalAlignment="Center" VerticalAlignment="Center" Visibility="Collapsed"/>
                                </Grid>
                                <ContentPresenter Margin="10,0,0,0" VerticalAlignment="Center"/>
                            </StackPanel>
                            <ControlTemplate.Triggers>
                                <Trigger Property="IsChecked" Value="True">
                                    <Setter TargetName="border" Property="BorderBrush" Value="{StaticResource PrimaryAccentBrush}"/>
                                    <Setter TargetName="checkmark" Property="Visibility" Value="Visible"/>
                                </Trigger>
                                <Trigger Property="IsMouseOver" Value="True">
                                    <Setter TargetName="border" Property="BorderBrush" Value="{StaticResource TextPrimaryBrush}"/>
                                </Trigger>
                                <Trigger Property="IsEnabled" Value="False">
                                    <Setter Property="Opacity" Value="0.5"/>
                                </Trigger>
                            </ControlTemplate.Triggers>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style>

            <Style TargetType="Button" x:Key="PrimaryActionButton">
                <Setter Property="Background" Value="{StaticResource PrimaryAccentBrush}" />
                <Setter Property="Foreground" Value="{StaticResource PrimaryBackgroundBrush}" />
                <Setter Property="FontWeight" Value="Bold"/>
                <Setter Property="BorderThickness" Value="0" />
                <Setter Property="Padding" Value="15,10" />
                <Setter Property="FontSize" Value="14" />
                <Setter Property="Cursor" Value="Hand"/>
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="Button">
                            <Border x:Name="border" Background="{TemplateBinding Background}" CornerRadius="5">
                                <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                            </Border>
                            <ControlTemplate.Triggers>
                                <Trigger Property="IsEnabled" Value="False">
                                    <Setter TargetName="border" Property="Opacity" Value="0.5"/>
                                </Trigger>
                            </ControlTemplate.Triggers>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
                <Style.Triggers>
                    <Trigger Property="IsMouseOver" Value="True">
                        <Setter Property="Background" Value="{StaticResource SecondaryAccentBrush}" />
                    </Trigger>
                </Style.Triggers>
            </Style>

            <Style TargetType="Button" x:Key="NavigationButton">
                <Setter Property="Background" Value="Transparent"/>
                <Setter Property="Foreground" Value="{StaticResource TextSecondaryBrush}"/>
                <Setter Property="HorizontalContentAlignment" Value="Left"/>
                <Setter Property="Padding" Value="15,12"/>
                <Setter Property="FontSize" Value="14"/>
                <Setter Property="BorderThickness" Value="0"/>
                <Setter Property="Cursor" Value="Hand"/>
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="Button">
                            <Border Background="{TemplateBinding Background}" CornerRadius="5">
                                <ContentPresenter HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" VerticalAlignment="Center"/>
                            </Border>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
                <Style.Triggers>
                    <Trigger Property="IsMouseOver" Value="True">
                        <Setter Property="Background" Value="{StaticResource ButtonHoverBrush}"/>
                        <Setter Property="Foreground" Value="{StaticResource TextPrimaryBrush}"/>
                    </Trigger>
                </Style.Triggers>
            </Style>

            <!-- STYLES FOR CUSTOM SCROLLBAR -->
            <Style x:Key="ScrollBarThumbStyle" TargetType="{x:Type Thumb}">
                <Setter Property="SnapsToDevicePixels" Value="True"/>
                <Setter Property="OverridesDefaultStyle" Value="true"/>
                <Setter Property="IsTabStop" Value="false"/>
                <Setter Property="Focusable" Value="false"/>
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="{x:Type Thumb}">
                            <Border x:Name="thumbBorder" 
                                CornerRadius="3"
                                Background="{StaticResource PrimaryAccentBrush}"
                                Opacity="0.6"/>
                            <ControlTemplate.Triggers>
                                <Trigger Property="IsMouseOver" Value="True">
                                    <Setter TargetName="thumbBorder" Property="Opacity" Value="0.8"/>
                                </Trigger>
                                <Trigger Property="IsDragging" Value="True">
                                    <Setter TargetName="thumbBorder" Property="Opacity" Value="1.0"/>
                                </Trigger>
                            </ControlTemplate.Triggers>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style>

            <Style x:Key="ScrollBarButtonStyle" TargetType="{x:Type RepeatButton}">
                <Setter Property="SnapsToDevicePixels" Value="True"/>
                <Setter Property="OverridesDefaultStyle" Value="true"/>
                <Setter Property="Focusable" Value="false"/>
                <Setter Property="IsTabStop" Value="false"/>
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="{x:Type RepeatButton}">
                            <Border Background="Transparent">
                                <Path x:Name="arrow"
                                  Fill="{StaticResource TextSecondaryBrush}"
                                  Data="{Binding Content, RelativeSource={RelativeSource TemplatedParent}}" />
                            </Border>
                            <ControlTemplate.Triggers>
                                <Trigger Property="IsMouseOver" Value="True">
                                    <Setter TargetName="arrow" Property="Fill" Value="{StaticResource TextPrimaryBrush}" />
                                </Trigger>
                            </ControlTemplate.Triggers>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style>

            <Style x:Key="ModernScrollBar" TargetType="{x:Type ScrollBar}">
                <Setter Property="SnapsToDevicePixels" Value="True"/>
                <Setter Property="OverridesDefaultStyle" Value="true"/>
                <Style.Triggers>
                    <Trigger Property="Orientation" Value="Vertical">
                        <Setter Property="Width" Value="12"/>
                        <Setter Property="Height" Value="Auto" />
                        <Setter Property="Template">
                            <Setter.Value>
                                <ControlTemplate TargetType="{x:Type ScrollBar}">
                                    <Grid>
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="18"/>
                                            <RowDefinition Height="*"/>
                                            <RowDefinition Height="18"/>
                                        </Grid.RowDefinitions>
                                        <Border Grid.RowSpan="3" CornerRadius="5" Background="{StaticResource SecondaryBackgroundBrush}"/>
                                        <RepeatButton Grid.Row="0" Style="{StaticResource ScrollBarButtonStyle}"
                                                  Command="ScrollBar.LineUpCommand" Content="M 0 4 L 4 0 L 8 4 Z"/>
                                        <Track Name="PART_Track" Grid.Row="1" IsDirectionReversed="true">
                                            <Track.DecreaseRepeatButton>
                                                <RepeatButton Command="ScrollBar.PageUpCommand" Opacity="0"/>
                                            </Track.DecreaseRepeatButton>
                                            <Track.Thumb>
                                                <Thumb Style="{StaticResource ScrollBarThumbStyle}" />
                                            </Track.Thumb>
                                            <Track.IncreaseRepeatButton>
                                                <RepeatButton Command="ScrollBar.PageDownCommand" Opacity="0"/>
                                            </Track.IncreaseRepeatButton>
                                        </Track>
                                        <RepeatButton Grid.Row="2" Style="{StaticResource ScrollBarButtonStyle}"
                                                  Command="ScrollBar.LineDownCommand" Content="M 0 0 L 4 4 L 8 0 Z"/>
                                    </Grid>
                                </ControlTemplate>
                            </Setter.Value>
                        </Setter>
                    </Trigger>
                </Style.Triggers>
            </Style>

            <Style TargetType="TextBox" x:Key="ConsoleTextBox">
                <Setter Property="Background" Value="{StaticResource PrimaryBackgroundBrush}" />
                <Setter Property="Foreground" Value="{StaticResource TextSecondaryBrush}" />
                <Setter Property="BorderBrush" Value="{StaticResource BorderBrush}" />
                <Setter Property="BorderThickness" Value="1" />
                <Setter Property="Padding" Value="5" />
                <Setter Property="FontSize" Value="12" />
                <Setter Property="FontFamily" Value="Consolas, Courier New"/>
                <Setter Property="IsReadOnly" Value="True"/>
                <Setter Property="TextWrapping" Value="NoWrap"/>
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="{x:Type TextBoxBase}">
                            <Border Name="Border" CornerRadius="2" Padding="2"
                                Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}">
                                <ScrollViewer x:Name="PART_ContentHost" 
                                          VerticalScrollBarVisibility="{TemplateBinding VerticalScrollBarVisibility}" 
                                          HorizontalScrollBarVisibility="{TemplateBinding HorizontalScrollBarVisibility}">
                                    <ScrollViewer.Resources>
                                        <!-- HIER WAR DER FEHLER: Korrekter Name wird jetzt verwendet -->
                                        <Style TargetType="ScrollBar" BasedOn="{StaticResource ModernScrollBar}"/>
                                    </ScrollViewer.Resources>
                                </ScrollViewer>
                            </Border>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style>

            <!-- STYLES FOR WINDOW CONTROL BUTTONS -->
            <Style TargetType="Button" x:Key="WindowButtonStyle">
                <Setter Property="Background" Value="Transparent"/>
                <Setter Property="Foreground" Value="{StaticResource TextSecondaryBrush}"/>
                <Setter Property="BorderThickness" Value="0"/>
                <Setter Property="FontFamily" Value="Segoe MDL2 Assets"/>
                <Setter Property="FontSize" Value="10"/>
                <Setter Property="Width" Value="46"/>
                <Setter Property="Height" Value="32"/>
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="Button">
                            <Border Background="{TemplateBinding Background}">
                                <TextBlock Text="{TemplateBinding Content}" VerticalAlignment="Center" HorizontalAlignment="Center"/>
                            </Border>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
                <Style.Triggers>
                    <Trigger Property="IsMouseOver" Value="True">
                        <Setter Property="Background" Value="{StaticResource ButtonHoverBrush}"/>
                        <Setter Property="Foreground" Value="{StaticResource TextPrimaryBrush}"/>
                    </Trigger>
                </Style.Triggers>
            </Style>

            <Style TargetType="Button" x:Key="CloseWindowButtonStyle" BasedOn="{StaticResource WindowButtonStyle}">
                <Style.Triggers>
                    <Trigger Property="IsMouseOver" Value="True">
                        <Setter Property="Background" Value="#E81123"/>
                        <Setter Property="Foreground" Value="White"/>
                    </Trigger>
                </Style.Triggers>
            </Style>

            <!-- THE MAIN WINDOW STYLE -->
            <Style TargetType="Window" x:Key="ModernWindowStyle">
                <Setter Property="Foreground" Value="{StaticResource TextPrimaryBrush}"/>
                <Setter Property="Background" Value="{StaticResource PrimaryBackgroundBrush}"/>
                <Setter Property="WindowStyle" Value="None"/>
                <Setter Property="AllowsTransparency" Value="False"/>
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="Window">
                            <Border BorderBrush="{StaticResource PrimaryAccentBrush}" BorderThickness="0,0,0,1" Background="{TemplateBinding Background}">
                                <Grid>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="32"/>
                                        <RowDefinition Height="*"/>
                                    </Grid.RowDefinitions>
                                    <Grid Grid.Row="0">
                                        <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                                            <Button Style="{StaticResource WindowButtonStyle}" Content="&#xE949;" WindowChrome.IsHitTestVisibleInChrome="True" Click="MinimizeButton_Click"/>
                                            <Button Style="{StaticResource CloseWindowButtonStyle}" Content="&#xE8BB;" WindowChrome.IsHitTestVisibleInChrome="True" Click="CloseButton_Click"/>
                                        </StackPanel>
                                        <TextBlock Text="{TemplateBinding Title}" VerticalAlignment="Center" HorizontalAlignment="Left" Margin="10,0,0,0" Foreground="{StaticResource TextSecondaryBrush}"/>
                                    </Grid>
                                    <AdornerDecorator Grid.Row="1">
                                        <ContentPresenter/>
                                    </AdornerDecorator>
                                </Grid>
                            </Border>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
                <Setter Property="WindowChrome.WindowChrome">
                    <Setter.Value>
                        <WindowChrome CaptionHeight="32" ResizeBorderThickness="0" GlassFrameThickness="0" CornerRadius="0" />
                    </Setter.Value>
                </Setter>
            </Style>
        </ResourceDictionary>
    </Application.Resources>
</Application>